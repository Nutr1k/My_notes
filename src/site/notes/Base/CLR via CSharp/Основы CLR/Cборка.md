---
{"dg-publish":true,"permalink":"/base/clr-via-c-sharp/osnovy-clr/cborka/"}
---


Сборка (assembly) — это **наименьшая логическая единица, содержащая скомпилированный код для .NET**, т. е. это полностью самодостаточный логический элемент. 
Сборка — это концептуальное понятие обозначает способ объединения группы файлов в единую сущность

CLR работает не с [[Base/CLR via CSharp/Основы CLR/Управляемый модуль(PE файл)\|модулями]], а **со сборками**

Сборка может быть со **[[Base/CLR via CSharp/Основы CLR/Подпись сборки(Сборки с строгим именем)\|строгим именем]]** и **нестрогим**. Сборка **со строгим именем** отличается от сборки **с нестрогим** именем, только тем что <u>имеет цифровую подпись</u>.
Сборки со строгими именами могут ссылаться только на сборки со строгими именами.
У сборки со строгим именем четыре атрибута, уникально ее идентифицирующих: 
1. имя файла (без расширения)
2. номер версии
3. идентификатор регионального стандарта
4. открытый ключ (используется небольшой хеш-код открытого ключа, который называют маркером открытого ключа (public key token)) 
Следующие четыре строки, которые иногда называют отображаемым именем сборки (assembly display name), идентифицируют совершенно разные файлы сборки: 
"MyTypes, Version=1.0.8123.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
"MyTypes, Version=1.0.8123.0, Culture="en-US", PublicKeyToken=b77a5c561934e089" 
"MyTypes, Version=2.0.1234.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
"MyTypes, Version=1.0.8123.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"

Сборка обеспечивает логическую группировку одного или нескольких управляемых модулей или файлов ресурсов(.jpeg, html).  

Сборка это наименьшая единица многократного использования, безопасности и управления версиями. 

Сборка может состоять из одного или нескольких файлов — все зависит от выбранных средств и компиляторов.

Сборка представляет собой либо исполняемое приложение, либо библиотеку DLL, содержащую набор типов для использования в исполняемом приложении.

Объединение управляемых модулей в сборку
![Pasted image 20230129170447.png](/img/user/Files/Image/Pasted%20image%2020230129170447.png)

Сборка включает в себя:
1. заголовок файла Windows; (`dumpbin /headers Shapes.dll`)
2. заголовок файла CLR; (`dumpbin /clrheader Shapes.dll`)
3. IL-код;
4. метаданные типов;  
5. манифест сборки; 
6. дополнительные встроенные ресурсы.


Самым важным в сборке является манифест, без него код выполняться не будет:
Манифест представляет собой обычный набор таблиц метаданных. 
Манифест хранить следующие данные:

1. Имя сборки
2. Номер версии: основной и дополнительный номера. Используется для управления версиями
3. Язык и региональные параметры: информация о языке и региональных параметрах, которые поддерживает сборка
4. Информация о строгом имени: открытый ключ издателя
5. Список всех файлов сборки: хэш и имя каждого из входящих в сборку файлов
6. **Список ссылок на другие сборки, которые использует текущая сборка**
7. Список ссылок на типы, используемые сборкой

Чтобы посмотреть манифест сборки, нужно открыть .dll через ildasm.exe и на надпись MANIFEST

ildasm.exe
[[Pasted image 20230129181627.png]]


Так же данные о манифесте хранятся с свойствах проекта
[[Pasted image 20230129181813.png]]

[[Pasted image 20230215141154.png]]


Чтобы добавить файл _AssemblyInfo.cs_ в проект нужно в _csproj_ добавить строку 

```
  <PropertyGroup>
  <GeneratedAssemblyInfoFile>AssemblyInfo.cs</GeneratedAssemblyInfoFile>
  </PropertyGroup>
```

![Pasted image 20230215141510.png](/img/user/Files/Image/Pasted%20image%2020230215141510.png)
