---
{"dg-publish":true,"permalink":"/base/clr-via-c-sharp/osnovy-clr/globalnyj-kesh-sborok-gac-globalnoe-razvyortyvanie/"}
---


Место, где располагаются совместно используемые сборки, называют глобальным кэшем сборок (global assembly cache, GAC). В GAC располагаются сборки только со [[Base/CLR via CSharp/Основы CLR/Подпись сборки(Сборки с строгим именем)\|строгими именами]].

Глобальный кеш сборок:
```
%SystemRoot%\Microsoft.NET\Assembly
```
Добавление сборки в GAC:
 ```
GACUtil.exe /i Полное_имя_сборки
```

Удаление сборки:
```
 GACUtil.exe /u Полное_имя_сборки
```

Вывод всех сборок в GAC
```
 GACUtil.exe  /l
```

### Создание сборки с отложенным подписанием:
Это очень удобно при разработке сборки, т.к. мы можем добавить её в GAC. Сборка будет содержать в себе только публичный ключ и не будет содержать цифровой подписи, что будет нам наруку т.к. мы сможем её менять и при этом не подписывать каждый раз.
1. Во время разработки сборки следует получить файл, содержащий лишь открытый ключ компании, и добавить в строку компиляции сборки параметры /keyfile и /delaysign: 
```
csc /keyfile:MyCompany.PublicKey /delaysign MyAssembly.cs 
```
2.  После построения сборки надо выполнить показанную далее команду, чтобы получить возможность тестирования этой сборки, установки ее в каталог GAC и компоновки других сборок, ссылающихся на нее. Эту команду достаточно исполнить лишь раз, не нужно делать это при каждой компоновке сборки. 
```
SN.exe -Vr MyAssembly.dll 
```
3. Подготовившись к упаковке и развертыванию сборки, надо получить закрытый ключ компании и выполнить приведенную далее команду. При желании можно установить новую версию в GAC, но не пытайтесь это сделать до выполнения шага 4
```
SN.exe -R MyAssembly.dll MyCompany.PrivateKey 
```
4. Для тестирования сборки в реальных условиях снова включите проверку следующей командой: 
```
SN -Vu MyAssembly.dll
```

Плюсы GAC:
1. GAC позволяет нескольким приложениям совместно использовать сборки
2. Из-за совместного использования сокращая в целом количество обращений к физической памяти
3. Совместное управление несколькими версиями сборки
4. Легче развертывать новую версию сборки и заставить все приложения использовать новую версию сборки посредством реализации политики издателя

Минусы GAC:
1. Установка сборки в GAC делается невозможным простым копированием.
2. Обычно находится под защитой механизмов безопасности, поэтому устанавливать сборки в GAC может только администратор.