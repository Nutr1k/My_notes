---
{"dg-publish":true,"permalink":"/base/clr-via-c-sharp/proektirovanie-tipov/kovariantnye-i-kontravariantnye-argumenty-tipy-v-delegatah-i-interfejsah/"}
---


–ö–∞–∂–¥—ã–π –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤-—Ç–∏–ø–æ–≤ –æ–±–æ–±—â–µ–Ω–Ω–æ–≥–æ –¥–µ–ª–µ–≥–∞—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–º–µ—á–µ–Ω –∫–∞–∫ –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π –∏–ª–∏ –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π.

##### –û–±—â–∏–µ –ø–æ–Ω—è—Ç–∏—è:
1. –ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å: –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø, —á–µ–º –∑–∞–¥–∞–Ω–Ω—ã–π –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ
2. –ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å: –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –æ–±—â–∏–π(—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π) —Ç–∏–ø, —á–µ–º –∑–∞–¥–∞–Ω–Ω—ã–π –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ
3. –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å: –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–¥–∞–Ω–Ω—ã–π —Ç–∏–ø

##### –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è
1. –ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å(out): –ø–æ–∑–≤–æ–ª—è–µ—Ç, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π —Ç–∏–ø –º–æ–∂–µ—Ç –±—ã—Ç—å **–ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–º —Ç–∏–ø–æ–º**, –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞–Ω –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ. –í —è–∑—ã–∫–µ –°# –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π —Ç–∏–ø –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º **out**. 
	–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–±–æ–±—â–µ–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –º–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤ **–≤—ã—Ö–æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏**, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–∞—á–µ—Å—Ç–≤–µ **–≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è** –º–µ—Ç–æ–¥–∞.
2. –ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å(in): –ø–æ–∑–≤–æ–ª—è–µ—Ç, —á—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ–º—ã–π —Ç–∏–ø –º–æ–∂–µ—Ç –±—ã—Ç—å **–±–∞–∑–æ–≤—ã–º —Ç–∏–ø–æ–º**, –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞ –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞–Ω –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ. –í —è–∑—ã–∫–µ C# –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π —Ç–∏–ø –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º **in**. –ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä-—Ç–∏–ø –º–æ–∂–µ—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤–æ **–≤—Ö–æ–¥–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏**, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∫–∞—á–µ—Å—Ç–≤–µ **–∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –º–µ—Ç–æ–¥–∞**.

### –í –¥–µ–ª–µ–≥–∞—Ç–∞—Ö
##### –ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π –¥–µ–ª–µ–≥–∞—Ç:
```csharp
delegate T –∏–º—è_–¥–µ–ª–µ–≥–∞—Ç–∞<out T>();
```

```csharp
public class Message
{
	public string Text { get; }
	public Message(string text) => Text = text;
	public virtual void Print() => Console.WriteLine($"Message: {Text}");
}
public class EmailMessage : Message
{
	public EmailMessage(string text) : base(text) { }
	public override void Print() => Console.WriteLine($"Email: {Text}");
}

public static EmailMessage CreateEmailMessage()
{
	return new EmailMessage("Hello");
}

//–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π –¥–µ–ª–µ–≥–∞—Ç
delegate T MessageBuilder<out T>();

public static void Main()
{
	// –î–µ–ª–µ–≥–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç EmailMessage - –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø
	MessageBuilder<EmailMessage> EmailMessageWriter = CreateEmailMessage;
	
	// –î–µ–ª–µ–≥–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –±–æ–ª–µ–µ –æ–±—â–∏–π —Ç–∏–ø Message
	MessageBuilder<Message> messageBuilder = EmailMessageWriter;     // –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
	
	Message message = messageBuilder(); // –≤—ã–∑–æ–≤ –¥–µ–ª–µ–≥–∞—Ç–∞
	message.Print(); // Email: hello Tom
}
```
–ö–∞–∫ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å:
–≠–∫–∑–µ–º–ø–ª—è—Ä –¥–µ–ª–µ–≥–∞—Ç `MessageBuilder<Message>` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª–µ–µ –æ–±—â–∏–π —Ç–∏–ø(–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å) –∏ –µ–º—É –ø—Ä–∏ —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–µ–ª–µ–≥–∞—Ç–∞ `MessageBuilder<EmailMessage>`–∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø(–ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π –∫–ª–∞—Å—Å).

###### –†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ –ø—Ä–æ –º–µ—Ö–∞–Ω–∏–∑–º –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç–∏
–ü–æ —Ñ–∞–∫—Ç—É —Ç—É—Ç –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å Up—Åasting —Ç.–∫. —Ç–∏–ø `EmailMessage` —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–º –æ—Ç –±–∞–∑–æ–≤–æ–≥–æ —Ç–∏–ø–∞ `Message`. –¢.–∫. Upcasting –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–æ, —Ç—É—Ç –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ, –ø—Ä–æ—Å—Ç–æ —Ç–∏–ø `EmailMessage` –ø—Ä–∏–≤–æ–¥–∏—Ç—å—Å—è –∫ —Ç–∏–ø—É `Message`.

–î–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Ç.–∫ Upcasting –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
```csharp
public static Message Test()
{
	return new EmailMessage("Hello World!");
}
```

–¢–æ–∂–µ —Å–∞–º–æ–µ –∏ –≤ –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã—Ö –¥–µ–ª–µ–≥–∞—Ç–∞—Ö.
> [!question] –î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞ –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –≤ –¥–µ–ª–µ–≥–∞—Ç–∞—Ö
> –ù–æ –ø–æ —Ñ–∞–∫—Ç—É —ç—Ç–æ –Ω—É–∂–Ω–æ, –∫–æ–≥–¥–∞ –¥–µ–ª–æ –∫–∞—Å–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–µ–ª–µ–≥–∞—Ç–æ–≤, —á—Ç–æ–±—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –æ–¥–∏–Ω –¥–µ–ª–µ–≥–∞—Ç –¥—Ä—É–≥–æ–º—É –¥–µ–ª–µ–≥–∞—Ç—É. –ù–æ –∫–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ out –∫–æ–≥–¥–∞ —ç—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–≤ –∏ –¥–µ–ª–µ–≥–∞—Ç–æ–≤. 

–ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –¥–µ–ª–µ–≥–∞—Ç—É `MessageBuilder<Message>` –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª–µ–µ –æ–±—â–∏–π —Ç–∏–ø –º–µ—Ç–æ–¥–∞ `CreateEmailMessage` –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–∏–ø `EmailMessage`.
```csharp

delegate T MessageBuilder<T>(string text);
// –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –±–æ–ª–µ–µ –æ–±—â–∏–π —Ç–∏–ø Message      –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø
MessageBuilder<Message> messageBuilder           =    CreateEmailMessage; 
```


##### –ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
–ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π –¥–µ–ª–µ–≥–∞—Ç:
```csharp
delegate void –∏–º—è_–¥–µ–ª–µ–≥–∞—Ç–∞<in T>(T –∏–º—è_–ø–∞—Ä–∞–º–µ—Ç—Ä–∞);
```

```csharp
delegate void MessageReceiver<in T>(T message);

public static void WriteMessage(Message msg)
{
	msg.Print();
}
public static void Main()
{
	// –î–µ–ª–µ–≥–∞—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç –±–æ–ª–µ–µ –æ–±—â–µ–≥–æ —Ç–∏–ø–∞
	MessageReceiver<Message> messageReceiver = WriteMessage;
	
	// –î–µ–ª–µ–≥–∞—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ–±—ä–µ–∫—Ç –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞
	MessageReceiver<EmailMessage> emailMessageReceiver = messageReceiver; // –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
	
	emailMessageReceiver(new EmailMessage("Hello World!"));  // Email: Hello World!
	
	//emailMessageReceiver(new Message("Hello World!"));//–ê—Ä–≥—É–º–µ–Ω—Ç 1: –Ω–µ —É–¥–∞–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∏–∑
	                                                    //"Program.Message" –≤ "Program.EmailMessage"
}
```
–ö–∞–∫ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å:
–≠–∫–∑–µ–º–ø–ª—è—Ä –¥–µ–ª–µ–≥–∞—Ç `MessageBuilder<EmailMessage>` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø(–ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π –∫–ª–∞—Å—Å) –∏ –µ–º—É –ø—Ä–∏ —ç—Ç–æ–º –º–æ–∂–Ω–æ –ø—Ä–∏—Å–≤–æ–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–µ–ª–µ–≥–∞—Ç–∞ `MessageBuilder<Message>`–∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–æ–ª–µ–µ –æ–±—â–∏–π —Ç–∏–ø (–±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å).

###### –†–∞–∑–º—ã—à–ª–µ–Ω–∏–µ –ø—Ä–æ –º–µ—Ö–∞–Ω–∏–∑–º –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç–∏
–•–æ—Ç–µ–ª–æ—Å—å –±—ã —Å–∫–∞–∑–∞—Ç—å —á—Ç–æ –ø—Ä–∏ –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç Downcast, –Ω–æ downcast –Ω–µ –≤–æ–∑–º–æ–∂–µ–Ω –±–µ–∑ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ upcasting(–∞ –µ–≥–æ –∫–∞–∫ —Ä–∞–∑ –∏ –Ω–µ—Ç—É).

–ü–æ —Ñ–∞–∫—Ç—É —É –Ω–∞—Å –Ω–µ –ø–æ—è–≤–∏–ª–æ—Å—å –Ω–æ–≤–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Ç.–∫. –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å(–≤—ã–∑—ã–≤–∞—Ç—å) –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω—ã–π –¥–µ–ª–µ–≥–∞—Ç –º—ã –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Ç–µ–º –∂–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–∏–ø–æ–º –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –∑–∞–¥–∞–Ω –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ.

–î–µ–ª–µ–≥–∞—Ç `emailMessageReceiver` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `EmailMessage`, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ç–æ, —á—Ç–æ –º–µ—Ç–æ–¥ –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π —Å—Å—ã–ª–∞–µ—Ç—Å—è –¥–µ–ª–µ–≥–∞—Ç, –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –µ–≥–æ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å `Message` 

```csharp
emailMessageReceiver(new EmailMessage("Hello World!"));  // Email: Hello World!
	
//emailMessageReceiver(new Message("Hello World!"));//–ê—Ä–≥—É–º–µ–Ω—Ç 1: –Ω–µ —É–¥–∞–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –∏–∑
	                                                    //"Program.Message" –≤ "Program.EmailMessage"
```

=> –≤ –º–µ—Ç–æ–¥–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å upcasting.
```csharp
//–ü—Ä–∏ –≤—ã–∑–æ–≤–µ —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –¥–µ–ª–µ–≥–∞—Ç–∞ emailMessageReceiver –±—É–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å Upcasting
public static void WriteMessage(Message msg)
{
	msg.Print();
}
```

> [!success] –ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
> –ü—É—Ç–∞–Ω–∏—Ü–∞ –±–æ–ª—å—à–µ —Å–≤—è–∑–∞–Ω–∞ —Å ¬´–ø–æ—á–µ–º—É¬ª.¬†–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –ø–æ–Ω–∏–∂–∞–µ—Ç—Å—è –¥–æ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∫–∞–∫—É—é-—Ç–æ —Ñ—É–Ω–∫—Ü–∏—é.¬†–ù–æ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ–ª—å–Ω—ã–π –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –≤–º–µ—Å—Ç–æ –±–∞–∑–æ–≤–æ–≥–æ.¬†–Ø —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–π —Ç–∏–ø(–º–µ–Ω–µ–µ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π) –∫–∞–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–π —Ç–∏–ø, –Ω–æ –æ–Ω –≤—Å–µ —Ä–∞–≤–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –∏—Å—Ö–æ–¥–Ω—ã–π –±–∞–∑–æ–≤—ã–π —Ç–∏–ø. 

–ú—ã –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º –¥–µ–ª–µ–≥–∞—Ç—É –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø -  –º–µ—Ç–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª–µ–µ –æ–±—â–∏–π —Ç–∏–ø, –Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –¥–µ–ª–µ–≥–∞—Ç –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ —Å —Ç–µ–º –∂–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ç–∏–ø–æ–º, –∫–æ—Ç–æ—Ä—ã–π –≤ –º–µ—Ç–æ–¥–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫ –æ–±—â–∏–π —Ç–∏–ø(–±–∞–∑–æ–≤—ã–π —Ç–∏–ø).ü§Øü§Øü§Ø


### –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ —Å–∞–º–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º –∏ –∫ –º–µ—Ç–æ–¥–∞–º –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –≤ –Ω–∏—Ö. 
–¢–æ –µ—Å—Ç—å –º—ã –º–æ–∂–µ–º –ø—Ä–∏—Å–≤–æ–∏—Ç—å –±–æ–ª–µ–µ –æ–±—â–µ–º—É –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–º—É —Ç–∏–ø—É –æ–±—ä–µ–∫—Ç –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞.
```csharp
interface IMessenger<out T>
{
	T –ò–º—è_–º–µ—Ç–æ–¥–∞();
}
```


–ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ —Å–∞–º–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º –∏ –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –º–µ—Ç–æ–¥–æ–≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –≤ –Ω–∏—Ö.
–¢–æ –µ—Å—Ç—å –º—ã –º–æ–∂–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –±–æ–ª–µ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø–µ—Ä–µ–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç –±–æ–ª–µ–µ –æ–±—â–µ–≥–æ —Ç–∏–ø–∞ –∏–ª–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—â–µ–≥–æ —Ç–∏–ø–∞.
```csharp
interface IMessenger<in T>
{
	void –ò–º—è_–º–µ—Ç–æ–¥–∞(T –∏–º—è_–ø–∞—Ä–∞–º–µ—Ç—Ä–∞);
}
```

###### –ü—Ä–∏–º–µ—Ä:
```csharp
public interface ICovariant<out T> { }
public interface IContravariant<in T> { }

public class Covariant<T> : ICovariant<T> { }
public class Contravariant<T> : IContravariant<T> { }

public class Fruit { }
public class Apple : Fruit { }

public class TheInsAndOuts
{
	public void Covariance()
	{
		//–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
		ICovariant<Fruit> fruit = new Covariant<Apple>(); //—è–±–ª–æ–∫–æ         –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤–æ —Ñ—Ä—É–∫—Ç—ã, –±–µ–∑ –∫–ª—é—á–µ–≤–æ–≥–æ
//—Å–ª–æ–≤–∞ out —ç—Ç–æ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
		ICovariant<Apple> apple2 = new Covariant<Apple>();
		Covariant(apple2);//–ö–æ–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
	}

	public void Contravariance()
	{
		//–ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
		IContravariant<Apple> fruit = new Contravariant<Fruit>();//–§—Ä—É–∫—Ç—ã –ø–æ–Ω–∏–∂–∞—é—Ç—Å—è –¥–æ —è–±–ª–æ–∫–∞, –±–µ–∑
		//–∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ in —ç—Ç–æ –Ω–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è
		IContravariant<Fruit> fruit2 = new Contravariant<Fruit>();
		Contravariant(fruit2);//–ö–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å
	}
	public void Covariant(ICovariant<Fruit> fruit) { }

	public void Contravariant(IContravariant<Apple> apple) { }
}
```

### –í–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–ª—è –∑–Ω–∞—á–∏–º—ã—Ö —Ç–∏–ø–æ–≤

–í–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤—É–µ—Ç —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–æ–∫ –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å **–Ω–µ–ø—Ä–∏–º–µ–Ω–∏–º–∞ –¥–ª—è –∑–Ω–∞—á–∏–º—ã—Ö —Ç–∏–ø–æ–≤** –∏–∑-–∑–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–ø–∞–∫–æ–≤–∫–∏ (boxing).

```csharp
void ProcessCollection(IEnumerable collection) { ... }
```
–ù–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥, –ø–µ—Ä–µ–¥–∞–≤–∞—è —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç `List<DateTime>` –∏–∑-–∑–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å—Å—ã–ª–æ—á–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É –∑–Ω–∞—á–∏–º—ã–º —Ç–∏–ø–æ–º DateTime –∏ –æ–±—ä–µ–∫—Ç–æ–º Object, –¥–∞–∂–µ –µ—Å–ª–∏ DateTime —É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω –æ—Ç –æ–±—ä–µ–∫—Ç–∞ Object.

–í–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ç–∞–∫–∂–µ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞ –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞-—Ç–∏–ø–∞, –µ—Å–ª–∏ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —ç—Ç–æ–≥–æ —Ç–∏–ø–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ out –∏ ref. –ù–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å—Ç—Ä–æ–∫–∏: 
```csharp
delegate void SomeDelegate(ref T t);//–û—à–∏–±–∫–∞!!! (–Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞—è –≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ—Å—Ç—å: –ø–∞—Ä–∞–º–µ—Ç—Ä-—Ç–∏–ø 'T' –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
//–∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç–Ω–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º –¥–ª—è 'SomeDelegate.Invoke(ref T)'. –ü–∞—Ä–∞–º–µ—Ç—Ä-—Ç–∏–ø 'T' –∫–æ–Ω—Ç—Ä–∞–≤–∞—Ä–∏–∞–Ω—Ç–µ–Ω)
```