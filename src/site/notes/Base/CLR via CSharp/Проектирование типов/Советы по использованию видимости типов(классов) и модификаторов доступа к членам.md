---
{"dg-publish":true,"permalink":"/base/clr-via-c-sharp/proektirovanie-tipov/sovety-po-ispolzovaniyu-vidimosti-tipov-klassov-i-modifikatorov-dostupa-k-chlenam/"}
---



Причины использовать запечатанные классы:
- **Управление версиями**. Если класс изначально запечатан(sealed) его можно сделать не запечатанным, обратное действие может повлиять на работу производных классов т.к. запечатанный класс нельзя наследовать
- **Производительность**. Виртуальные методы вызываются быстрее невиртуальных. Сделав класс запечатанным JIT-компилятор может вызвать виртуальный метод невиртуально, тем самым повысив производительность
- **Безопасность и предсказуемость.** Состояние класса должно быть надежно защищено. Если класс не запечатан, производный класс может изменить его состояние, воспользовавшись незащищенными полями или методами базового класса, изменяющими его доступные незакрытые поля. Кроме того, в производном классе можно переопределить виртуальные методы и не вызывать реализацию соответствующих методов базового класса.


Правила при проектировании классов:
- Если класс не предназначен для наследования следует объявить его запечатанным.
- Если нужно определить класс, предназначенный для создания производных классов, одновременно запретив его специализацию, нужно переопределить и запечатать все виртуальные методы, которые наследует мой класс.
- Методы, свойства, события, поля данных класса всегда по максимум объявлять закрытыми.(поведение по умолчанию). Открывать их только по мере необходимости
- В ООП есть проверенный временем принцип: «лучший метод борьбы со сложностью — добавление новых типов». Если реализация алгоритма чрезмерно усложняется, следует определить вспомогательные типы, инкапсулирующие часть функциональности. Если вспомогательные типы используются в единственном базовом типе, следует сделать их вложенными. Это позволит ссылаться на них через базовый тип и позволит им обращаться к защищенным членам базового типа. Visual Studio и рекомендующее определять общедоступные вложенные типы в области видимости файла или сборки (за пределами базового типа), поскольку некоторые разработчики считают синтаксис обращения к вложенным типам громоздким. Я соблюдаю это правило, и никогда не определяю открытые вложенные типы.