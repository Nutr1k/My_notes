---
{"dg-publish":true,"permalink":"/base/clr-via-c-sharp/klyuchevye-mehanizmy/mnogopotochnos/task-delay-i-thread-sleep/"}
---

`Task.Delay`не заставляет поток заснуть. Он использует таймер.

Используйте, [`Thread.Sleep`](https://learn.microsoft.com/en-us/dotnet/api/system.threading.thread.sleep)когда хотите заблокировать текущий поток.

Используйте [`await Task.Delay`](https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task.delay), когда вам нужна логическая задержка без блокировки текущего потока.

В текущей реализации .NET существует единственный «поток таймера», который отслеживает управляемые экземпляры таймеров и вызывает их события в нужное время. Этот поток таймера блокируется на управляющем сигнале с тайм-аутом, установленным на время следующего таймера. Управляющий сигнал используется для добавления, удаления или изменения таймеров, поэтому, когда эта блокирующая операция завершается по истечении времени ожидания, поток таймера понимает, что сработал следующий таймер. Это стандартная операция блокировки потока, то есть поток находится в состоянии простоя и удаляется из очереди планировщика до тех пор, пока блокировка не завершится или не истечёт время ожидания. Тайм-аут этих операций обрабатывается прерыванием таймера планировщика операционной системы.

Таким образом, технически поток действительно существует, но это всего лишь один поток на процесс, а не один поток на каждый вызов `Task.Delay`.

Я ещё раз подчёркиваю, что это относится к текущей реализации .NET. Были предложены и другие решения, например, один поток таймера на каждый процессор или динамический пул потоков таймера. Возможно, эти варианты тестировались и были отвергнуты по какой-то причине, или, возможно, в будущем будет принято альтернативное решение. Насколько мне известно, это нигде официально не задокументировано, поэтому это деталь реализации.

[stackoverflow](https://stackoverflow.com/questions/20082221/when-to-use-task-delay-when-to-use-thread-sleep)

[stackoverflow](https://stackoverflow.com/questions/65219573/is-task-delay-truly-asynchronous-like-an-i-o-operation-is-i-e-does-it-rely-on)